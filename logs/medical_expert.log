[2025-04-20 08:43:28,638] INFO [medical_expert_cli:53] Démarrage session : session_id=session_20250420_084328_2c37 user_id=user_68d71c44
[2025-04-20 08:44:07,118] INFO [medical_expert_cli:64] User(user_68d71c44) [session_20250420_084328_2c37] : bonjour
[2025-04-20 08:44:07,165] INFO [medical_expert_cli:71] Agent [session_20250420_084328_2c37] : 
[2025-04-20 08:46:58,134] INFO [medical_expert_cli:53] Démarrage session : session_id=session_20250420_084658_dbdd user_id=user_c570245c
[2025-04-20 08:46:58,134] ERROR [medical_expert_cli:79] Erreur fatale dans le CLI : create_session() missing 1 required keyword-only argument: 'app_name'
Traceback (most recent call last):
  File "C:\Users\donfa\OneDrive\Desktop\Expert System\medical_expert_adk\main.py", line 77, in <module>
    main()
  File "C:\Users\donfa\OneDrive\Desktop\Expert System\medical_expert_adk\main.py", line 57, in main
    SESSION_SERVICE.create_session(user_id=user_id, session_id=session_id)
TypeError: create_session() missing 1 required keyword-only argument: 'app_name'
[2025-04-20 08:50:58,884] INFO [medical_expert_cli:53] Démarrage session : session_id=session_20250420_085058_7552 user_id=user_30e62251
[2025-04-20 08:50:58,884] ERROR [medical_expert_cli:79] Erreur fatale dans le CLI : create_session() missing 1 required keyword-only argument: 'app_name'
Traceback (most recent call last):
  File "C:\Users\donfa\OneDrive\Desktop\Expert System\medical_expert_adk\main.py", line 77, in <module>
    main()
  File "C:\Users\donfa\OneDrive\Desktop\Expert System\medical_expert_adk\main.py", line 57, in main
    SESSION_SERVICE.create_session(user_id=user_id, session_id=session_id)
TypeError: create_session() missing 1 required keyword-only argument: 'app_name'
[2025-04-20 08:51:46,789] INFO [medical_expert_cli:53] Démarrage session : session_id=session_20250420_085146_2e98 user_id=user_04c8342f
[2025-04-20 08:51:51,373] INFO [medical_expert_cli:66] User(user_04c8342f) [session_20250420_085146_2e98] : k
[2025-04-20 08:51:51,388] INFO [medical_expert_cli:73] Agent [session_20250420_085146_2e98] : 
[2025-04-20 09:05:12,836] INFO [medical_expert_cli:53] Démarrage session : session_id=session_20250420_090512_b251 user_id=user_1772129a
[2025-04-20 09:05:18,519] INFO [medical_expert_cli:66] User(user_1772129a) [session_20250420_090512_b251] : j'ai mal
[2025-04-20 09:05:18,528] INFO [medical_expert_cli:73] Agent [session_20250420_090512_b251] : 
[2025-04-20 09:11:00,726] INFO [medical_expert_cli:53] Démarrage session : session_id=session_20250420_091100_566d user_id=user_940fc3cc
[2025-04-20 09:11:15,557] INFO [medical_expert_cli:66] User(user_940fc3cc) [session_20250420_091100_566d] : j'ai mal au dos
[2025-04-20 09:11:15,754] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 09:11:22,581] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB8504C160>
[2025-04-20 09:11:22,581] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x000002BB84F1BA40> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 09:11:23,375] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB8503E070>
[2025-04-20 09:11:23,375] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 09:11:23,375] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 09:11:23,375] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 09:11:23,376] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 09:11:23,376] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 09:11:25,042] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 08:11:23 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=1542'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 09:11:25,043] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 09:11:25,044] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 09:11:25,045] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 09:11:25,045] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 09:11:25,047] DEBUG [httpcore.connection:87] close.started
[2025-04-20 09:11:25,047] DEBUG [httpcore.connection:87] close.failed exception=CancelledError()
[2025-04-20 09:11:25,049] INFO [medical_expert_cli:73] Agent [session_20250420_091100_566d] : Bonjour ! Dr. Fox à votre service. Mal au dos, d'accord. Pour mieux cerner votre situation, pourriez-vous me dire si vous avez d'autres symptômes ? Par exemple, avez-vous de la fièvre, des engourdissements, ou des difficultés à uriner ?
[2025-04-20 09:11:52,501] INFO [medical_expert_cli:66] User(user_940fc3cc) [session_20250420_091100_566d] : mal a la poitrine oui
[2025-04-20 09:11:52,524] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 09:11:52,636] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB85095BE0>
[2025-04-20 09:11:52,636] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x000002BB84F1BDC0> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 09:11:52,812] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB85095880>
[2025-04-20 09:11:52,813] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 09:11:52,813] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 09:11:52,813] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 09:11:52,813] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 09:11:52,814] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 09:11:54,409] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 08:11:53 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=1464'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 09:11:54,409] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 09:11:54,410] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 09:11:54,410] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 09:11:54,410] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 09:11:54,411] DEBUG [httpcore.connection:87] close.started
[2025-04-20 09:11:54,412] DEBUG [httpcore.connection:87] close.failed exception=CancelledError()
[2025-04-20 09:11:54,413] INFO [medical_expert_cli:73] Agent [session_20250420_091100_566d] : Mal au dos et à la poitrine, hmm... Pourrais-je vous poser quelques questions supplémentaires afin de mieux comprendre ce qui se passe ? Avez-vous de la toux, de la fièvre, ou des difficultés à respirer ?
[2025-04-20 09:12:31,967] INFO [medical_expert_cli:66] User(user_940fc3cc) [session_20250420_091100_566d] : oui j'ai du mal a respirer depuis hier faites moi aussi une blague docteur
[2025-04-20 09:12:31,993] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 09:12:32,111] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB84ED6640>
[2025-04-20 09:12:32,112] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x000002BB8500D5C0> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 09:12:32,302] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB8504CF10>
[2025-04-20 09:12:32,302] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 09:12:32,302] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 09:12:32,302] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 09:12:32,303] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 09:12:32,303] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 09:12:34,201] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 08:12:33 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=1774'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 09:12:34,203] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 09:12:34,203] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 09:12:34,203] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 09:12:34,204] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 09:12:34,207] DEBUG [httpcore.connection:87] close.started
[2025-04-20 09:12:34,207] DEBUG [httpcore.connection:87] close.failed exception=CancelledError()
[2025-04-20 09:16:18,702] INFO [medical_expert_cli:66] User(user_940fc3cc) [session_20250420_091100_566d] : vraiment ?
[2025-04-20 09:16:18,724] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 09:16:18,910] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB85064790>
[2025-04-20 09:16:18,910] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x000002BB85134340> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 09:16:19,160] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB850646D0>
[2025-04-20 09:16:19,160] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 09:16:19,160] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 09:16:19,160] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 09:16:19,161] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 09:16:19,161] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 09:16:20,939] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 08:16:19 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=1589'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 09:16:20,940] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 09:16:20,941] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 09:16:20,941] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 09:16:20,941] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 09:16:20,942] DEBUG [httpcore.connection:87] close.started
[2025-04-20 09:16:20,942] DEBUG [httpcore.connection:87] close.failed exception=CancelledError()
[2025-04-20 09:16:42,031] INFO [medical_expert_cli:66] User(user_940fc3cc) [session_20250420_091100_566d] : mal de tete et c'est tout
[2025-04-20 09:16:42,058] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 09:16:42,360] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB85031520>
[2025-04-20 09:16:42,360] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x000002BB851343C0> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 09:16:42,539] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB850310A0>
[2025-04-20 09:16:42,539] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 09:16:42,539] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 09:16:42,539] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 09:16:42,540] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 09:16:42,540] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 09:16:44,248] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 08:16:43 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=1584'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 09:16:44,249] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 09:16:44,250] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 09:16:44,250] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 09:16:44,250] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 09:16:44,251] DEBUG [httpcore.connection:87] close.started
[2025-04-20 09:16:44,252] DEBUG [httpcore.connection:87] close.failed exception=CancelledError()
[2025-04-20 09:16:44,253] INFO [medical_expert_cli:73] Agent [session_20250420_091100_566d] : OK. Donc, si je récapitule, vous avez mal au dos, à la poitrine, vous avez du mal à respirer et vous avez mal à la tête. Est-ce bien cela ? Avez-vous remarqué si quelque chose en particulier déclenche ou aggrave ces symptômes ?

[2025-04-20 09:17:03,341] INFO [medical_expert_cli:66] User(user_940fc3cc) [session_20250420_091100_566d] : non
[2025-04-20 09:17:03,368] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 09:17:03,562] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB85070070>
[2025-04-20 09:17:03,562] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x000002BB85134640> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 09:17:03,835] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB85070280>
[2025-04-20 09:17:03,835] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 09:17:03,836] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 09:17:03,836] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 09:17:03,836] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 09:17:03,836] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 09:17:05,538] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 08:17:04 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=1505'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 09:17:05,539] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 09:17:05,539] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 09:17:05,539] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 09:17:05,540] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 09:17:05,541] DEBUG [httpcore.connection:87] close.started
[2025-04-20 09:17:05,541] DEBUG [httpcore.connection:87] close.failed exception=CancelledError()
[2025-04-20 09:17:05,542] INFO [medical_expert_cli:73] Agent [session_20250420_091100_566d] : Bien. Sur une échelle de 1 à 10, où 1 est une douleur très légère et 10 est la douleur la plus intense que vous ayez jamais ressentie, comment évalueriez-vous votre douleur à la poitrine ?

[2025-04-20 09:17:22,849] INFO [medical_expert_cli:66] User(user_940fc3cc) [session_20250420_091100_566d] : 7
[2025-04-20 09:17:22,875] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 09:17:23,058] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB85095EB0>
[2025-04-20 09:17:23,058] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x000002BB85134A40> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 09:17:23,309] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB85095610>
[2025-04-20 09:17:23,309] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 09:17:23,310] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 09:17:23,310] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 09:17:23,310] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 09:17:23,310] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 09:17:24,949] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 08:17:23 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=1446'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 09:17:24,949] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 09:17:24,950] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 09:17:24,950] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 09:17:24,950] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 09:17:24,952] DEBUG [httpcore.connection:87] close.started
[2025-04-20 09:17:24,952] DEBUG [httpcore.connection:87] close.failed exception=CancelledError()
[2025-04-20 09:17:24,953] INFO [medical_expert_cli:73] Agent [session_20250420_091100_566d] : D'accord. Et concernant votre difficulté à respirer, diriez-vous que c'est une sensation d'oppression, de souffle court, ou autre chose ?

[2025-04-20 09:17:43,202] INFO [medical_expert_cli:66] User(user_940fc3cc) [session_20250420_091100_566d] : docteur faites mon dignositque je vous ai tout dit
[2025-04-20 09:17:43,228] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 09:17:43,412] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB85095100>
[2025-04-20 09:17:43,412] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x000002BB85134BC0> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 09:17:43,669] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB85095F10>
[2025-04-20 09:17:43,670] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 09:17:43,670] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 09:17:43,670] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 09:17:43,671] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 09:17:43,671] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 09:17:45,548] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 08:17:44 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=1688'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 09:17:45,549] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 09:17:45,549] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 09:17:45,549] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 09:17:45,549] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 09:17:45,576] DEBUG [httpcore.connection:87] close.started
[2025-04-20 09:17:45,576] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 09:17:45,576] DEBUG [httpcore.connection:87] close.complete
[2025-04-20 09:17:45,753] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB8504C2B0>
[2025-04-20 09:17:45,753] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x000002BB8503A3C0> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 09:17:46,013] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB8504C280>
[2025-04-20 09:17:46,013] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 09:17:46,013] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 09:17:46,013] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 09:17:46,015] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 09:17:46,015] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 09:17:47,998] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 08:17:46 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=1791'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 09:17:47,999] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 09:17:48,000] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 09:17:48,000] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 09:17:48,000] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 09:17:48,001] DEBUG [httpcore.connection:87] close.started
[2025-04-20 09:17:48,002] DEBUG [httpcore.connection:87] close.failed exception=CancelledError()
[2025-04-20 09:17:48,003] INFO [medical_expert_cli:73] Agent [session_20250420_091100_566d] : Hmm, c'est étrange. D'après les informations que vous m'avez fournies, je n'arrive pas à établir un diagnostic précis avec certitude. Cela peut être dû à plusieurs raisons, et il est important de ne pas tirer de conclusions hâtives.

Pour affiner le diagnostic, pourrions-nous explorer quelques pistes supplémentaires ? J'aimerais vous poser d'autres questions. Cela pourrait nous aider à mieux comprendre ce qui se passe. Seriez-vous d'accord ?

[2025-04-20 09:18:11,436] INFO [medical_expert_cli:66] User(user_940fc3cc) [session_20250420_091100_566d] : ok une derniere
[2025-04-20 09:18:11,463] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 09:18:11,645] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB85064A60>
[2025-04-20 09:18:11,645] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x000002BB84F04640> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 09:18:14,476] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB85064DC0>
[2025-04-20 09:18:14,476] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 09:18:14,476] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 09:18:14,477] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 09:18:14,477] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 09:18:14,477] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 09:18:16,010] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 08:18:14 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=1321'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 09:18:16,010] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 09:18:16,012] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 09:18:16,012] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 09:18:16,012] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 09:18:16,014] DEBUG [httpcore.connection:87] close.started
[2025-04-20 09:18:16,014] DEBUG [httpcore.connection:87] close.failed exception=CancelledError()
[2025-04-20 09:18:16,016] INFO [medical_expert_cli:73] Agent [session_20250420_091100_566d] : Parfait. Avez-vous de la fièvre, des frissons, ou des sueurs nocturnes ?

[2025-04-20 09:18:21,682] INFO [medical_expert_cli:66] User(user_940fc3cc) [session_20250420_091100_566d] : fievre
[2025-04-20 09:18:21,710] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 09:18:21,855] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB85095670>
[2025-04-20 09:18:21,856] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x000002BB8503A140> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 09:18:22,080] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB85095850>
[2025-04-20 09:18:22,080] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 09:18:22,080] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 09:18:22,080] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 09:18:22,081] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 09:18:22,081] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 09:18:23,767] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 08:18:22 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=1564'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 09:18:23,768] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 09:18:23,768] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 09:18:23,769] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 09:18:23,769] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 09:18:23,792] DEBUG [httpcore.connection:87] close.started
[2025-04-20 09:18:23,792] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 09:18:23,793] DEBUG [httpcore.connection:87] close.complete
[2025-04-20 09:18:23,909] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB85031040>
[2025-04-20 09:18:23,909] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x000002BB851349C0> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 09:18:24,087] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB8503EEB0>
[2025-04-20 09:18:24,088] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 09:18:24,088] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 09:18:24,088] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 09:18:24,088] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 09:18:24,089] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 09:18:27,223] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 08:18:26 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=3008'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 09:18:27,224] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 09:18:27,224] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 09:18:27,225] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 09:18:27,225] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 09:18:27,227] DEBUG [httpcore.connection:87] close.started
[2025-04-20 09:18:27,227] DEBUG [httpcore.connection:87] close.failed exception=CancelledError()
[2025-04-20 09:18:27,228] INFO [medical_expert_cli:73] Agent [session_20250420_091100_566d] : Je suis toujours dans l'incapacité d'établir un diagnostic précis avec les informations dont je dispose. Cela peut être frustrant, je le comprends.

Pour ne pas vous laisser sans réponse, je vais vous proposer quelques pistes possibles, tout en soulignant qu'il est crucial de consulter un médecin pour un diagnostic définitif et un traitement approprié.

Votre combinaison de symptômes pourrait évoquer :

*   **Une infection respiratoire :** comme une pneumonie ou une bronchite, surtout avec la fièvre et les difficultés respiratoires.
*   **Un problème musculo-squelettique :** les douleurs au dos et à la poitrine pourraient être liées à une tension musculaire ou à une inflammation, mais cela n'explique pas forcément la fièvre et les difficultés respiratoires.
*   **Dans de rares cas, un problème cardiaque :** la douleur thoracique et les difficultés respiratoires peuvent parfois être liées à des problèmes cardiaques, mais d'autres symptômes seraient généralement présents.

Compte tenu de la difficulté à respirer et de la fièvre, je vous recommande vivement de consulter un médecin dès que possible. Il pourra effectuer des examens complémentaires (auscultation, radiographie pulmonaire, analyses sanguines...) pour identifier la cause de vos symptômes et vous proposer un traitement adapté.

En attendant, reposez-vous, hydratez-vous bien et surveillez l'évolution de vos symptômes. Si vous avez l'impression que votre état s'aggrave, n'hésitez pas à vous rendre aux urgences.

[2025-04-20 09:19:35,266] INFO [medical_expert_cli:66] User(user_940fc3cc) [session_20250420_091100_566d] : (c'est le dev qui te parle et je veux savoir si tu arrives bien a te servir des fonctions outils de dignostique que tu as a ta disposition?) si oui quels sont les maux que tu peux diagnostiquer que je t'ai progrmme ?
[2025-04-20 09:19:35,298] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 09:19:35,414] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB8504C6A0>
[2025-04-20 09:19:35,414] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x000002BB8503A140> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 09:19:35,589] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB8504CF10>
[2025-04-20 09:19:35,589] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 09:19:35,590] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 09:19:35,590] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 09:19:35,590] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 09:19:35,590] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 09:19:37,912] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 08:19:36 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=2197'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 09:19:37,912] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 09:19:37,913] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 09:19:37,913] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 09:19:37,913] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 09:19:37,915] DEBUG [httpcore.connection:87] close.started
[2025-04-20 09:19:37,915] DEBUG [httpcore.connection:87] close.failed exception=CancelledError()
[2025-04-20 09:20:42,398] INFO [medical_expert_cli:66] User(user_940fc3cc) [session_20250420_091100_566d] : execute une des fonctions je veux voir si tu peux vraiment
[2025-04-20 09:20:42,427] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 09:20:42,546] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB85031190>
[2025-04-20 09:20:42,546] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x000002BB84FCCAC0> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 09:20:43,277] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB85064A30>
[2025-04-20 09:20:43,278] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 09:20:43,278] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 09:20:43,278] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 09:20:43,278] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 09:20:43,278] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 09:20:45,736] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 08:20:43 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=1468'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 09:20:45,736] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 09:20:45,737] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 09:20:45,737] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 09:20:45,737] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 09:20:45,764] DEBUG [httpcore.connection:87] close.started
[2025-04-20 09:20:45,765] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 09:20:45,765] DEBUG [httpcore.connection:87] close.complete
[2025-04-20 09:20:45,946] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB84ED6AF0>
[2025-04-20 09:20:45,946] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x000002BB85134540> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 09:20:46,198] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB85031190>
[2025-04-20 09:20:46,199] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 09:20:46,199] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 09:20:46,199] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 09:20:46,199] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 09:20:46,199] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 09:20:49,326] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 08:20:46 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=1483'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 09:20:49,326] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 09:20:49,327] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 09:20:49,327] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 09:20:49,327] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 09:20:49,329] DEBUG [httpcore.connection:87] close.started
[2025-04-20 09:20:49,330] DEBUG [httpcore.connection:87] close.failed exception=CancelledError()
[2025-04-20 09:20:49,331] INFO [medical_expert_cli:73] Agent [session_20250420_091100_566d] : Comme vous pouvez le voir, j'ai bien exécuté la fonction `list_symptoms` et obtenu la liste des symptômes connus du système. Maintenant, dites-moi si vous souhaitez que j'essaie un diagnostic avec une combinaison de ces symptômes.

[2025-04-20 09:21:11,626] INFO [medical_expert_cli:66] User(user_940fc3cc) [session_20250420_091100_566d] : quel est cette liste que tu as obtenu je dois savoir
[2025-04-20 09:21:11,654] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 09:21:11,846] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB84F5E130>
[2025-04-20 09:21:11,846] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x000002BB85134540> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 09:21:12,109] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB84F5E580>
[2025-04-20 09:21:12,109] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 09:21:12,109] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 09:21:12,110] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 09:21:12,110] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 09:21:12,110] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 09:21:14,126] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 08:21:13 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=1815'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 09:21:14,127] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 09:21:14,128] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 09:21:14,128] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 09:21:14,128] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 09:21:14,130] DEBUG [httpcore.connection:87] close.started
[2025-04-20 09:21:14,130] DEBUG [httpcore.connection:87] close.failed exception=CancelledError()
[2025-04-20 09:21:14,131] INFO [medical_expert_cli:73] Agent [session_20250420_091100_566d] : Absolument ! Voici la liste des symptômes que j'ai obtenue en utilisant la fonction `list_symptoms` :

*   back\_pain
*   chest\_pain
*   cough
*   fainting
*   fatigue
*   fever
*   headache
*   restlessness
*   sore\_throat
*   sunken\_eyes

Il s'agit des symptômes que je peux actuellement prendre en compte pour établir un diagnostic. N'hésitez pas à me proposer une combinaison de ces symptômes pour que je puisse tester la fonction `diagnose`.

[2025-04-20 09:39:16,332] INFO [medical_expert_cli:66] User(user_940fc3cc) [session_20250420_091100_566d] : humm
[2025-04-20 09:39:16,364] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 09:39:16,737] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB85095A90>
[2025-04-20 09:39:16,737] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x000002BB85134540> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 09:39:35,227] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002BB8501D370>
[2025-04-20 09:39:35,227] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 09:39:35,228] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 09:39:35,228] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 09:39:35,228] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 09:39:35,228] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 09:39:35,403] DEBUG [httpcore.http11:87] receive_response_headers.failed exception=RemoteProtocolError('Server disconnected without sending a response.')
[2025-04-20 09:39:35,403] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 09:39:35,404] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 09:39:35,454] INFO [medical_expert_cli:73] Agent [session_20250420_091100_566d] : 
[2025-04-20 10:30:54,339] INFO [werkzeug:97] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://192.168.100.208:8000
[2025-04-20 10:30:54,340] INFO [werkzeug:97] [33mPress CTRL+C to quit[0m
[2025-04-20 10:31:12,115] INFO [werkzeug:97] 192.168.100.208 - - [20/Apr/2025 10:31:12] "[33mGET / HTTP/1.1[0m" 404 -
[2025-04-20 10:31:12,158] INFO [werkzeug:97] 192.168.100.208 - - [20/Apr/2025 10:31:12] "[33mGET / HTTP/1.1[0m" 404 -
[2025-04-20 10:31:12,239] INFO [werkzeug:97] 192.168.100.208 - - [20/Apr/2025 10:31:12] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-04-20 10:31:12,260] INFO [werkzeug:97] 192.168.100.208 - - [20/Apr/2025 10:31:12] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-04-20 10:35:03,123] INFO [medical_expert_api:85] Nouvelle session API crÃ©Ã©e : session_id=session_20250420_103503_2c62 user_id=user_9b569538
[2025-04-20 10:35:03,123] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 10:35:03] "POST /api/session/new HTTP/1.1" 200 -
[2025-04-20 10:36:15,860] INFO [medical_expert_api:113] Nouvelle session API implicite : session_id=session_20250420_103615_577c user_id=user_3a7b4d5c
[2025-04-20 10:36:15,862] INFO [medical_expert_api:119] API User(user_3a7b4d5c) [session_20250420_103615_577c] : J'ai de la fiÃ¨vre et je tousse depuis 3 jours
[2025-04-20 10:36:15,991] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 10:36:16,311] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001EA5DE8EDF0>
[2025-04-20 10:36:16,311] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x000001EA5DCBDF40> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 10:36:16,991] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001EA5DE8EB80>
[2025-04-20 10:36:16,991] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 10:36:16,992] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 10:36:16,992] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 10:36:16,992] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 10:36:16,992] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 10:36:18,645] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 09:36:17 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=1497'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 10:36:18,649] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 10:36:18,651] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 10:36:18,651] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 10:36:18,651] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 10:36:18,655] DEBUG [httpcore.connection:87] close.started
[2025-04-20 10:36:18,656] DEBUG [httpcore.connection:87] close.failed exception=CancelledError()
[2025-04-20 10:36:18,657] INFO [medical_expert_api:136] API Agent [session_20250420_103615_577c] : Bonjour ! Dr. Fox Ã  votre service. Je suis lÃ  pour vous aider Ã  comprendre ce qui vous arrive.

La fiÃ¨vre et la toux peuvent Ãªtre les symptÃ´mes de nombreuses affections. Pour affiner mon diagnostic, pourriez-vous me dire si vous avez d'autres symptÃ´mes ? Par exemple, avez-vous mal Ã  la gorge, des courbatures, ou des difficultÃ©s Ã  respirer ?
[2025-04-20 10:36:18,658] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 10:36:18] "POST /api/chat HTTP/1.1" 200 -
[2025-04-20 10:36:40,424] INFO [medical_expert_api:113] Nouvelle session API implicite : session_id=session_20250420_103640_2e2b user_id=user_ebc5a3dd
[2025-04-20 10:36:40,424] INFO [medical_expert_api:119] API User(user_ebc5a3dd) [session_20250420_103640_2e2b] : oui du mal a respirer
[2025-04-20 10:36:40,473] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 10:36:40,590] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001EA5DE71B20>
[2025-04-20 10:36:40,590] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x000001EA5DCBDE40> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 10:36:42,840] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001EA5DE71A60>
[2025-04-20 10:36:42,840] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 10:36:42,840] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 10:36:42,840] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 10:36:42,840] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 10:36:42,840] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 10:36:44,747] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 09:36:43 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=1541'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 10:36:44,747] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 10:36:44,747] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 10:36:44,747] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 10:36:44,747] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 10:36:44,747] DEBUG [httpcore.connection:87] close.started
[2025-04-20 10:36:44,747] DEBUG [httpcore.connection:87] close.failed exception=CancelledError()
[2025-04-20 10:36:44,750] INFO [medical_expert_api:136] API Agent [session_20250420_103640_2e2b] : Bonjour ! Dr. Fox Ã  votre service. Je comprends que vous avez du mal Ã  respirer. C'est un symptÃ´me important. Pourriez-vous me donner plus de dÃ©tails ? Est-ce que c'est apparu soudainement ? Y a-t-il d'autres symptÃ´mes que vous ressentez ?
[2025-04-20 10:36:44,750] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 10:36:44] "POST /api/chat HTTP/1.1" 200 -
[2025-04-20 10:37:14,039] INFO [medical_expert_api:113] Nouvelle session API implicite : session_id=session_20250420_103714_e671 user_id=user_8f789d3e
[2025-04-20 10:37:14,039] INFO [medical_expert_api:119] API User(user_8f789d3e) [session_20250420_103714_e671] : tu viens de demarer une noouvelle session ou tu te souviens de mon precedent message ?
[2025-04-20 10:37:14,070] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 10:37:14,179] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001EA5DF2BA30>
[2025-04-20 10:37:14,179] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x000001EA5DCBDEC0> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 10:37:36,307] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001EA5DF2B790>
[2025-04-20 10:37:36,307] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 10:37:36,308] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 10:37:36,308] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 10:37:36,308] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 10:37:36,308] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 10:37:36,308] DEBUG [httpcore.http11:87] receive_response_headers.failed exception=RemoteProtocolError('Server disconnected without sending a response.')
[2025-04-20 10:37:36,308] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 10:37:36,309] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 10:37:36,338] INFO [medical_expert_api:136] API Agent [session_20250420_103714_e671] : 
[2025-04-20 10:37:36,339] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 10:37:36] "POST /api/chat HTTP/1.1" 200 -
[2025-04-20 10:38:17,712] INFO [werkzeug:97] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://192.168.100.208:8000
[2025-04-20 10:38:17,712] INFO [werkzeug:97] [33mPress CTRL+C to quit[0m
[2025-04-20 12:00:50,612] INFO [werkzeug:97] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://192.168.100.208:8000
[2025-04-20 12:00:50,612] INFO [werkzeug:97] [33mPress CTRL+C to quit[0m
[2025-04-20 12:03:25,670] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 12:03:25] "GET /api/health HTTP/1.1" 200 -
[2025-04-20 12:08:36,195] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 12:08:36] "GET /api/health HTTP/1.1" 200 -
[2025-04-20 12:09:37,945] ERROR [medical_expert_api:218] Erreur non gÃ©rÃ©e dans l'API
Traceback (most recent call last):
  File "C:\Users\donfa\OneDrive\Desktop\Expert System\medical_expert_adk\venv\lib\site-packages\werkzeug\wrappers\request.py", line 611, in get_json
    rv = self.json_module.loads(data)
  File "C:\Users\donfa\OneDrive\Desktop\Expert System\medical_expert_adk\venv\lib\site-packages\flask\json\provider.py", line 187, in loads
    return json.loads(s, **kwargs)
  File "C:\Users\donfa\AppData\Local\Programs\Python\Python39\lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
  File "C:\Users\donfa\AppData\Local\Programs\Python\Python39\lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "C:\Users\donfa\AppData\Local\Programs\Python\Python39\lib\json\decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\donfa\OneDrive\Desktop\Expert System\medical_expert_adk\venv\lib\site-packages\flask\wrappers.py", line 214, in on_json_loading_failed
    return super().on_json_loading_failed(e)
  File "C:\Users\donfa\OneDrive\Desktop\Expert System\medical_expert_adk\venv\lib\site-packages\werkzeug\wrappers\request.py", line 645, in on_json_loading_failed
    raise BadRequest(f"Failed to decode JSON object: {e}")
werkzeug.exceptions.BadRequest: 400 Bad Request: Failed to decode JSON object: Expecting value: line 1 column 1 (char 0)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\donfa\OneDrive\Desktop\Expert System\medical_expert_adk\venv\lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\donfa\OneDrive\Desktop\Expert System\medical_expert_adk\venv\lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\donfa\OneDrive\Desktop\Expert System\medical_expert_adk\api_server.py", line 75, in create_session
    data = request.json or {}
  File "C:\Users\donfa\OneDrive\Desktop\Expert System\medical_expert_adk\venv\lib\site-packages\werkzeug\wrappers\request.py", line 560, in json
    return self.get_json()
  File "C:\Users\donfa\OneDrive\Desktop\Expert System\medical_expert_adk\venv\lib\site-packages\werkzeug\wrappers\request.py", line 620, in get_json
    rv = self.on_json_loading_failed(e)
  File "C:\Users\donfa\OneDrive\Desktop\Expert System\medical_expert_adk\venv\lib\site-packages\flask\wrappers.py", line 219, in on_json_loading_failed
    raise BadRequest() from ebr
werkzeug.exceptions.BadRequest: 400 Bad Request: The browser (or proxy) sent a request that this server could not understand.
[2025-04-20 12:09:37,990] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 12:09:37] "[35m[1mPOST /api/session/new HTTP/1.1[0m" 500 -
[2025-04-20 12:18:30,602] INFO [werkzeug:97] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://192.168.100.208:8000
[2025-04-20 12:18:30,602] INFO [werkzeug:97] [33mPress CTRL+C to quit[0m
[2025-04-20 12:18:44,235] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 12:18:44] "GET /api/health HTTP/1.1" 200 -
[2025-04-20 12:19:13,802] INFO [medical_expert_api:85] Nouvelle session API crÃ©Ã©e : session_id=session_20250420_121913_0f54 user_id=user_aa46fa2e
[2025-04-20 12:19:13,803] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 12:19:13] "POST /api/session/new HTTP/1.1" 200 -
[2025-04-20 12:31:39,818] INFO [werkzeug:97] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://192.168.100.208:8000
[2025-04-20 12:31:39,819] INFO [werkzeug:97] [33mPress CTRL+C to quit[0m
[2025-04-20 12:42:06,647] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 12:42:06] "GET /api/health HTTP/1.1" 200 -
[2025-04-20 12:42:48,826] INFO [medical_expert_api:85] Nouvelle session API crÃ©Ã©e : session_id=session_20250420_124248_c4a9 user_id=user_bdb69a8c
[2025-04-20 12:42:48,827] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 12:42:48] "POST /api/session/new HTTP/1.1" 200 -
[2025-04-20 12:59:59,916] INFO [medical_expert_api:190] Fin session API : session_id=session_20250420_124248_c4a9 user_id=user_bdb69a8c
[2025-04-20 12:59:59,920] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 12:59:59] "POST /api/session/end HTTP/1.1" 200 -
[2025-04-20 13:03:41,738] INFO [werkzeug:97] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://192.168.100.208:8000
[2025-04-20 13:03:41,738] INFO [werkzeug:97] [33mPress CTRL+C to quit[0m
[2025-04-20 13:04:03,056] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 13:04:03] "GET /api/health HTTP/1.1" 200 -
[2025-04-20 13:04:20,634] INFO [medical_expert_api:85] Nouvelle session API crÃ©Ã©e : session_id=session_20250420_130420_4ec6 user_id=user_794a9a04
[2025-04-20 13:04:20,635] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 13:04:20] "POST /api/session/new HTTP/1.1" 200 -
[2025-04-20 13:04:45,466] INFO [medical_expert_api:119] API User(user_794a9a04) [session_20250420_130420_4ec6] : ok
[2025-04-20 13:04:45,677] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 13:04:45,826] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000251DBC13250>
[2025-04-20 13:04:45,826] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x00000251DB9F6B40> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 13:04:46,027] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000251DBBC6160>
[2025-04-20 13:04:46,027] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 13:04:46,028] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 13:04:46,028] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 13:04:46,028] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 13:04:46,028] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 13:04:48,530] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 12:04:46 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=1386'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 13:04:48,533] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 13:04:48,534] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 13:04:48,534] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 13:04:48,534] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 13:04:48,538] DEBUG [httpcore.connection:87] close.started
[2025-04-20 13:04:48,539] DEBUG [httpcore.connection:87] close.failed exception=CancelledError()
[2025-04-20 13:04:48,540] INFO [medical_expert_api:136] API Agent [session_20250420_130420_4ec6] : Bonjour ! Je suis le Docteur Fox, ravi de vous assister aujourd'hui. Pour commencer, pourriez-vous me dÃ©crire ce qui vous amÃ¨ne Ã  consulter ? Quels sont vos symptÃ´mes ?

[2025-04-20 13:04:48,541] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 13:04:48] "POST /api/chat HTTP/1.1" 200 -
[2025-04-20 13:05:43,615] INFO [medical_expert_api:119] API User(user_794a9a04) [session_20250420_130420_4ec6] : qu'est-ce que je viens de dire doctor je ne m'en souviens plus
[2025-04-20 13:05:43,639] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 13:05:43,834] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000251DBC29A60>
[2025-04-20 13:05:43,834] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x00000251DB9F6C40> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 13:05:44,946] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000251DBC29970>
[2025-04-20 13:05:44,946] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 13:05:44,947] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 13:05:44,947] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 13:05:44,947] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 13:05:44,947] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 13:05:46,472] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 12:05:45 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=1326'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 13:05:46,473] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 13:05:46,473] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 13:05:46,473] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 13:05:46,473] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 13:05:46,477] DEBUG [httpcore.connection:87] close.started
[2025-04-20 13:05:46,477] DEBUG [httpcore.connection:87] close.failed exception=CancelledError()
[2025-04-20 13:05:46,479] INFO [medical_expert_api:136] API Agent [session_20250420_130420_4ec6] : Pas de souci, Ã§a arrive Ã  tout le monde ! :clin_doeil: On dirait que vous avez un petit trou de mÃ©moire. Est-ce que c'est un symptÃ´me qui vous arrive souvent ?
[2025-04-20 13:05:46,479] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 13:05:46] "POST /api/chat HTTP/1.1" 200 -
[2025-04-20 13:06:41,223] INFO [medical_expert_api:119] API User(user_794a9a04) [session_20250420_130420_4ec6] : donnez moi mon precedent message
[2025-04-20 13:06:41,247] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 13:06:41,437] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000251DBC66DC0>
[2025-04-20 13:06:41,437] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x00000251DB9F6640> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 13:06:42,783] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000251DBC66B20>
[2025-04-20 13:06:42,783] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 13:06:42,783] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 13:06:42,783] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 13:06:42,784] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 13:06:42,784] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 13:06:44,992] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 12:06:43 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=2016'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 13:06:44,992] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 13:06:44,993] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 13:06:44,993] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 13:06:44,993] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 13:06:44,995] DEBUG [httpcore.connection:87] close.started
[2025-04-20 13:06:44,995] DEBUG [httpcore.connection:87] close.failed exception=CancelledError()
[2025-04-20 13:06:44,996] INFO [medical_expert_api:136] API Agent [session_20250420_130420_4ec6] : Je suis dÃ©solÃ©, je n'ai pas la capacitÃ© de retrouver votre prÃ©cÃ©dent message. Mais je peux vous aider Ã  partir de maintenant. Souhaitez-vous qu'on reprenne depuis le dÃ©but ?
[2025-04-20 13:06:44,997] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 13:06:44] "POST /api/chat HTTP/1.1" 200 -
[2025-04-20 13:07:13,760] INFO [medical_expert_api:119] API User(user_794a9a04) [session_20250420_130420_4ec6] : heu..
[2025-04-20 13:07:13,781] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 13:07:13,975] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000251DBAE6550>
[2025-04-20 13:07:13,975] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x00000251DBBCA1C0> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 13:07:14,234] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000251DBBB32E0>
[2025-04-20 13:07:14,234] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 13:07:14,234] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 13:07:14,234] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 13:07:14,236] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 13:07:14,236] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 13:07:16,032] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 12:07:14 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=1592'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 13:07:16,032] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 13:07:16,033] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 13:07:16,033] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 13:07:16,033] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 13:07:16,035] DEBUG [httpcore.connection:87] close.started
[2025-04-20 13:07:16,035] DEBUG [httpcore.connection:87] close.failed exception=CancelledError()
[2025-04-20 13:07:16,036] INFO [medical_expert_api:136] API Agent [session_20250420_130420_4ec6] : Pas de problÃ¨me. Pour vous aider au mieux, j'ai besoin de connaÃ®tre les raisons de votre consultation. Pourriez-vous me dÃ©crire les symptÃ´mes qui vous prÃ©occupent ? N'hÃ©sitez pas Ã  me donner le plus de dÃ©tails possible.

[2025-04-20 13:07:16,037] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 13:07:16] "POST /api/chat HTTP/1.1" 200 -
[2025-04-20 13:12:30,189] INFO [medical_expert_api:190] Fin session API : session_id=session_20250420_130420_4ec6 user_id=user_794a9a04
[2025-04-20 13:12:30,190] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 13:12:30] "POST /api/session/end HTTP/1.1" 200 -
[2025-04-20 13:21:09,666] INFO [werkzeug:97] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://192.168.100.208:8000
[2025-04-20 13:21:09,666] INFO [werkzeug:97] [33mPress CTRL+C to quit[0m
[2025-04-20 13:22:05,717] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 13:22:05] "GET /api/health HTTP/1.1" 200 -
[2025-04-20 13:22:22,494] INFO [medical_expert_api:85] Nouvelle session API crÃ©Ã©e : session_id=session_20250420_132222_5e1a user_id=user_2c521ef5
[2025-04-20 13:22:22,494] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 13:22:22] "POST /api/session/new HTTP/1.1" 200 -
[2025-04-20 13:22:35,953] INFO [medical_expert_api:119] API User(user_2c521ef5) [session_20250420_132222_5e1a] : hey
[2025-04-20 13:22:36,183] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 13:22:36,546] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001F70E1E3070>
[2025-04-20 13:22:36,546] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x000001F70DFD7B40> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 13:22:36,793] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001F70E1D7F40>
[2025-04-20 13:22:36,793] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 13:22:36,794] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 13:22:36,794] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 13:22:36,794] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 13:22:36,794] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 13:22:38,366] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 12:22:37 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=1379'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 13:22:38,366] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 13:22:38,367] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 13:22:38,367] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 13:22:38,367] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 13:22:38,368] DEBUG [httpcore.connection:87] close.started
[2025-04-20 13:22:38,369] DEBUG [httpcore.connection:87] close.failed exception=CancelledError()
[2025-04-20 13:22:38,370] INFO [medical_expert_api:136] API Agent [session_20250420_132222_5e1a] : Bonjour ! Je suis le Dr. Fox, votre assistant mÃ©dical personnel. Dites-moi, quel est le problÃ¨me aujourd'hui ? Quels sont vos symptÃ´mes ?

[2025-04-20 13:22:38,370] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 13:22:38] "POST /api/chat HTTP/1.1" 200 -
[2025-04-20 13:22:56,977] INFO [medical_expert_api:119] API User(user_2c521ef5) [session_20250420_132222_5e1a] : bonjour
[2025-04-20 13:22:56,999] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 13:22:57,135] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001F70E1CB0D0>
[2025-04-20 13:22:57,135] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x000001F70DFD7640> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 13:22:57,329] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001F70E1CBCA0>
[2025-04-20 13:22:57,329] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 13:22:57,330] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 13:22:57,330] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 13:22:57,330] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 13:22:57,330] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 13:22:59,561] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 12:22:58 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=2101'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 13:22:59,562] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 13:22:59,562] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 13:22:59,562] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 13:22:59,562] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 13:22:59,564] DEBUG [httpcore.connection:87] close.started
[2025-04-20 13:22:59,564] DEBUG [httpcore.connection:87] close.failed exception=CancelledError()
[2025-04-20 13:22:59,565] INFO [medical_expert_api:136] API Agent [session_20250420_132222_5e1a] : Bonjour ! Comment puis-je vous aider aujourd'hui ? Quels sont vos symptÃ´mes ? N'hÃ©sitez pas Ã  me donner le plus de dÃ©tails possible.

[2025-04-20 13:22:59,566] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 13:22:59] "POST /api/chat HTTP/1.1" 200 -
[2025-04-20 13:23:39,270] INFO [medical_expert_api:119] API User(user_2c521ef5) [session_20250420_132222_5e1a] : heu...
[2025-04-20 13:23:39,291] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 13:23:39,669] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001F70E1E35B0>
[2025-04-20 13:23:39,669] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x000001F70E1DA3C0> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 13:23:40,234] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001F70E1E3190>
[2025-04-20 13:23:40,234] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 13:23:40,234] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 13:23:40,235] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 13:23:40,235] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 13:23:40,235] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 13:23:48,202] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 12:23:41 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=2058'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 13:23:48,202] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 13:23:48,202] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 13:23:48,203] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 13:23:48,203] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 13:23:48,204] DEBUG [httpcore.connection:87] close.started
[2025-04-20 13:23:48,205] DEBUG [httpcore.connection:87] close.failed exception=CancelledError()
[2025-04-20 13:23:48,206] INFO [medical_expert_api:136] API Agent [session_20250420_132222_5e1a] : Pas de souci, prenez votre temps. Si vous ne savez pas par oÃ¹ commencer, dites-moi simplement ce qui vous prÃ©occupe le plus. Je suis lÃ  pour vous aider Ã  identifier et Ã  comprendre vos symptÃ´mes.

[2025-04-20 13:23:48,207] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 13:23:48] "POST /api/chat HTTP/1.1" 200 -
[2025-04-20 13:24:13,854] INFO [medical_expert_api:119] API User(user_2c521ef5) [session_20250420_132222_5e1a] : heu,,
[2025-04-20 13:24:13,876] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 13:24:14,020] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001F70E1E35B0>
[2025-04-20 13:24:14,020] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x000001F70DFD7DC0> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 13:24:14,214] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001F70E0B1B50>
[2025-04-20 13:24:14,215] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 13:24:14,215] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 13:24:14,215] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 13:24:14,215] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 13:24:14,216] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 13:24:18,222] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 12:24:15 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=1473'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 13:24:18,224] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 13:24:18,224] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 13:24:18,224] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 13:24:18,224] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 13:24:18,226] DEBUG [httpcore.connection:87] close.started
[2025-04-20 13:24:18,227] DEBUG [httpcore.connection:87] close.failed exception=CancelledError()
[2025-04-20 13:24:18,227] INFO [medical_expert_api:136] API Agent [session_20250420_132222_5e1a] : Je comprends, il peut Ãªtre difficile de mettre des mots sur ce que l'on ressent. Pour vous aider, pourquoi ne pas commencer par me dire si vous avez de la fiÃ¨vre, si vous toussez, ou si vous avez des douleurs quelque part ?
[2025-04-20 13:24:18,228] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 13:24:18] "POST /api/chat HTTP/1.1" 200 -
[2025-04-20 13:33:38,423] INFO [medical_expert_api:190] Fin session API : session_id=session_20250420_132222_5e1a user_id=user_2c521ef5
[2025-04-20 13:33:38,424] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 13:33:38] "POST /api/session/end HTTP/1.1" 200 -
[2025-04-20 13:33:49,747] INFO [werkzeug:97] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://192.168.100.208:8000
[2025-04-20 13:33:49,748] INFO [werkzeug:97] [33mPress CTRL+C to quit[0m
[2025-04-20 13:34:10,272] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 13:34:10] "GET /api/health HTTP/1.1" 200 -
[2025-04-20 13:34:24,124] INFO [medical_expert_api:85] Nouvelle session API crÃ©Ã©e : session_id=session_20250420_133424_1fc1 user_id=user_62c81fd3
[2025-04-20 13:34:24,125] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 13:34:24] "POST /api/session/new HTTP/1.1" 200 -
[2025-04-20 13:34:54,133] INFO [medical_expert_api:119] API User(user_62c81fd3) [session_20250420_133424_1fc1] : salut
[2025-04-20 13:34:54,290] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 13:34:54,433] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002238AFC3160>
[2025-04-20 13:34:54,433] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x000002238ADC6B40> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 13:34:54,614] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002238AFB8070>
[2025-04-20 13:34:54,614] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 13:34:54,615] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 13:34:54,615] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 13:34:54,615] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 13:34:54,615] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 13:34:56,023] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 12:34:54 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=1281'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 13:34:56,024] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 13:34:56,025] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 13:34:56,025] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 13:34:56,025] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 13:34:56,026] DEBUG [httpcore.connection:87] close.started
[2025-04-20 13:34:56,027] DEBUG [httpcore.connection:87] close.failed exception=CancelledError()
[2025-04-20 13:34:56,028] INFO [medical_expert_api:136] API Agent [session_20250420_133424_1fc1] : Bonjour ! Je suis le Dr. Fox, ravi de vous assister aujourd'hui. Dites-moi, quel est le motif de votre consultation ? Quels sont vos symptÃ´mes ?

[2025-04-20 13:34:56,029] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 13:34:56] "POST /api/chat HTTP/1.1" 200 -
[2025-04-20 13:36:44,938] INFO [medical_expert_api:119] API User(user_62c81fd3) [session_20250420_133424_1fc1] : mal au penis
[2025-04-20 13:36:44,962] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 13:36:45,255] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002238AF95DF0>
[2025-04-20 13:36:45,255] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x000002238ADC6640> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 13:36:46,453] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002238AF95550>
[2025-04-20 13:36:46,453] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 13:36:46,454] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 13:36:46,454] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 13:36:46,454] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 13:36:46,454] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 13:36:48,752] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 12:36:47 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=1559'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 13:36:48,753] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 13:36:48,754] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 13:36:48,754] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 13:36:48,754] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 13:36:48,756] DEBUG [httpcore.connection:87] close.started
[2025-04-20 13:36:48,756] DEBUG [httpcore.connection:87] close.failed exception=CancelledError()
[2025-04-20 13:36:48,758] INFO [medical_expert_api:136] API Agent [session_20250420_133424_1fc1] : D'accord. Pour mieux comprendre la situation, pourriez-vous me dire si vous avez d'autres symptÃ´mes associÃ©s Ã  cette douleur au pÃ©nis ? Par exemple, avez-vous des rougeurs, des dÃ©mangeaisons, des Ã©coulements, des difficultÃ©s Ã  uriner, ou des douleurs pendant les rapports sexuels ?

[2025-04-20 13:36:48,758] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 13:36:48] "POST /api/chat HTTP/1.1" 200 -
[2025-04-20 13:37:12,552] INFO [medical_expert_api:119] API User(user_62c81fd3) [session_20250420_133424_1fc1] : non je tousse juste
[2025-04-20 13:37:12,575] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 13:37:12,689] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002238B034CD0>
[2025-04-20 13:37:12,689] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x000002238ADA6E40> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 13:37:13,354] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002238B034A30>
[2025-04-20 13:37:13,354] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 13:37:13,355] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 13:37:13,355] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 13:37:13,355] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 13:37:13,355] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 13:37:15,012] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 12:37:13 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=1531'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 13:37:15,012] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 13:37:15,013] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 13:37:15,013] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 13:37:15,013] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 13:37:15,015] DEBUG [httpcore.connection:87] close.started
[2025-04-20 13:37:15,015] DEBUG [httpcore.connection:87] close.failed exception=CancelledError()
[2025-04-20 13:37:15,016] INFO [medical_expert_api:136] API Agent [session_20250420_133424_1fc1] : IntÃ©ressant. Une toux et une douleur au pÃ©nis, ce n'est pas banal ! Pourriez-vous me dire si la toux est sÃ¨che ou grasse ? Avez-vous d'autres symptÃ´mes comme de la fiÃ¨vre, des courbatures, ou un mal de gorge ?
[2025-04-20 13:37:15,016] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 13:37:15] "POST /api/chat HTTP/1.1" 200 -
[2025-04-20 13:37:44,023] INFO [medical_expert_api:119] API User(user_62c81fd3) [session_20250420_133424_1fc1] : humm quel sont les maux que j'ai deja liste ?
[2025-04-20 13:37:44,046] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 13:37:44,237] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002238AFA9520>
[2025-04-20 13:37:44,238] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x000002238AFBA440> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 13:37:45,713] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002238AFA9E20>
[2025-04-20 13:37:45,714] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 13:37:45,714] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 13:37:45,714] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 13:37:45,714] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 13:37:45,715] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 13:37:47,812] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 12:37:46 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=1233'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 13:37:47,813] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 13:37:48,662] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 13:37:48,662] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 13:37:48,663] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 13:37:48,664] DEBUG [httpcore.connection:87] close.started
[2025-04-20 13:37:48,665] DEBUG [httpcore.connection:87] close.failed exception=CancelledError()
[2025-04-20 13:37:48,665] INFO [medical_expert_api:136] API Agent [session_20250420_133424_1fc1] : Vous avez mentionnÃ© une douleur au pÃ©nis et une toux.
[2025-04-20 13:37:48,666] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 13:37:48] "POST /api/chat HTTP/1.1" 200 -
[2025-04-20 13:37:58,441] INFO [medical_expert_api:119] API User(user_62c81fd3) [session_20250420_133424_1fc1] : ah bon ? je mentais
[2025-04-20 13:37:58,464] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 13:37:58,853] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002238AFA91F0>
[2025-04-20 13:37:58,853] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x000002238AF86F40> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 13:37:59,904] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002238AFA90A0>
[2025-04-20 13:37:59,904] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 13:37:59,905] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 13:37:59,905] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 13:37:59,905] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 13:37:59,905] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 13:38:01,274] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 12:38:00 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=1250'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 13:38:01,275] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 13:38:01,275] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 13:38:01,276] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 13:38:01,276] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 13:38:01,277] DEBUG [httpcore.connection:87] close.started
[2025-04-20 13:38:01,277] DEBUG [httpcore.connection:87] close.failed exception=CancelledError()
[2025-04-20 13:38:01,279] INFO [medical_expert_api:136] API Agent [session_20250420_133424_1fc1] : Ah, un petit farceur ! :clin_doeil: Dans ce cas, quels sont les symptÃ´mes rÃ©els qui vous prÃ©occupent aujourd'hui ?
[2025-04-20 13:38:01,280] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 13:38:01] "POST /api/chat HTTP/1.1" 200 -
[2025-04-20 13:40:18,729] INFO [medical_expert_api:119] API User(user_62c81fd3) [session_20250420_133424_1fc1] : mettez fin a la session je ne suis pas malade en fait c'etait une blague
[2025-04-20 13:40:18,752] DEBUG [httpcore.connection:87] connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-04-20 13:40:18,938] DEBUG [httpcore.connection:87] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002238AFD9670>
[2025-04-20 13:40:18,939] DEBUG [httpcore.connection:87] start_tls.started ssl_context=<ssl.SSLContext object at 0x000002238AF86A40> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-04-20 13:40:19,191] DEBUG [httpcore.connection:87] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002238AFD9880>
[2025-04-20 13:40:19,191] DEBUG [httpcore.http11:87] send_request_headers.started request=<Request [b'POST']>
[2025-04-20 13:40:19,192] DEBUG [httpcore.http11:87] send_request_headers.complete
[2025-04-20 13:40:19,192] DEBUG [httpcore.http11:87] send_request_body.started request=<Request [b'POST']>
[2025-04-20 13:40:19,192] DEBUG [httpcore.http11:87] send_request_body.complete
[2025-04-20 13:40:19,192] DEBUG [httpcore.http11:87] receive_response_headers.started request=<Request [b'POST']>
[2025-04-20 13:40:20,770] DEBUG [httpcore.http11:87] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Sun, 20 Apr 2025 12:40:19 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=1387'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-04-20 13:40:20,771] DEBUG [httpcore.http11:87] receive_response_body.started request=<Request [b'POST']>
[2025-04-20 13:40:20,771] DEBUG [httpcore.http11:87] receive_response_body.complete
[2025-04-20 13:40:20,771] DEBUG [httpcore.http11:87] response_closed.started
[2025-04-20 13:40:20,771] DEBUG [httpcore.http11:87] response_closed.complete
[2025-04-20 13:40:20,773] DEBUG [httpcore.connection:87] close.started
[2025-04-20 13:40:20,773] DEBUG [httpcore.connection:87] close.failed exception=CancelledError()
[2025-04-20 13:40:20,774] INFO [medical_expert_api:136] API Agent [session_20250420_133424_1fc1] : TrÃ¨s bien. Si vous n'avez pas besoin de mes services, je vais clore cette session. N'hÃ©sitez pas Ã  revenir si vous avez besoin de conseils mÃ©dicaux Ã  l'avenir. Prenez soin de vous ! END_DIAG

[2025-04-20 13:40:20,775] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 13:40:20] "POST /api/chat HTTP/1.1" 200 -
[2025-04-20 13:40:22,779] INFO [medical_expert_api:190] Fin session API : session_id=session_20250420_133424_1fc1 user_id=user_62c81fd3
[2025-04-20 13:40:22,780] INFO [werkzeug:97] 127.0.0.1 - - [20/Apr/2025 13:40:22] "POST /api/session/end HTTP/1.1" 200 -
